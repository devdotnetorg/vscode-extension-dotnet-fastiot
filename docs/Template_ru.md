# Шаблон, отладка шаблона

**Содержание**

1. Понятие шаблона
2. Структура шаблона
3. Структура файлов insert_launch_key.json и insert_tasks_key.json
4. Структура файла template.fastiot.yaml
5. Алгоритм создания проекта/добавление Launche и Tasks к проекту
6. Переменные слияния данных с файлами шаблона
7. Отладка шаблона

## Понятие шаблона

Шаблоны используются для создания проектов и добавления фалов `launch.json` и `tasks.json` к существующему проекту. Располагаются по пути `%userprofile%\fastiot\templates`, например `C:\Users\Anton\fastiot\templates\`. Шаблоны разделяются на два типа это системные - `system` и пользовательские - `user`. Если системный шаблон не продет проверку, то он автоматически будет удален и заменен на валидный. Если системны шаблон удалить, то он тоже будет автоматически восстановлен. Системные шаблоны автоматически обновляются при запуске расширения с ресурса [Github devdotnetorg/vscode-extension-dotnet-fastiot/tree/master/templates/system](https://github.com/devdotnetorg/vscode-extension-dotnet-fastiot/tree/master/templates/system). Далее, все будет рассмотрено на примере шаблона [dotnet-console-runtime-info](/templates/system/dotnet-console-runtime-info).

## Структура шаблона

Шаблон представляет из себя обычный zip-архив со следующей структурой:

- **storage** - папка содержащая необходимые скрипты и исполняемые файлы используемые в `tasks.json`;
- **template** - папка содержащая сам шаблон;
- **template.fastiot.png** - титульное изображение шаблона (пока не используется);
- **template.fastiot.yaml** - описание шаблона в формате YAML.

### Папка - storage

Могут размещаться любые файлы. В частности в папке каждого шаблона размещаются утилиты **cwRsync** и **ssh** используемые для удаленного входа на устройство и копирования исполняемыех бинарных фалов. По желанию можно заменить пакет, загрузив с официального сайта по [ссылке](https://itefix.net/cwrsync "ссылке").

### Папка - template

Содержимое папки и есть сам шаблон проекта. В это папке обязательно наличие следующих фалов в папке `.vscode`:

**launch.json** - шаблон Launch, используется при создание проекта;
**tasks.json** - шаблон Tasks, используется при создание проекта;
**insert_launch_key.json** - Launchs связанные непосредственно с запуском проекта, используется при создание проекта  и добавление отдельного Launch к существующему проекту;
**insert_tasks_key.json** - используется вместе с `insert_launch_key.json`.

### Файл - template.fastiot.png

Изображение шаблона в формате PNG размером не более 256x256 px.

### Файл - template.fastiot.yaml

Описание шаблона в формате YAML, схема для проверки шаблона [template.schema](..\schemas\template.schema.yaml).

## Структура файлов insert_launch_key.json и insert_tasks_key.json

TODO

## Структура файла template.fastiot.yaml

TODO

## Алгоритм создания проекта/добавление Launche и Tasks к проекту

TODO

## Переменные слияния данных с файлами шаблона

TODO

## Отладка шаблона

TODO
